{"meta":{"title":"小小白杨","subtitle":"I'm a fatal bug!","description":null,"author":"baiyangliu","url":"https://baiyangliu.com"},"pages":[{"title":"分类","date":"2016-12-15T10:00:50.000Z","updated":"2016-12-15T10:34:13.821Z","comments":true,"path":"categories.html","permalink":"https://baiyangliu.com/categories.html","excerpt":"","text":""},{"title":"关于","date":"2016-12-15T10:39:42.000Z","updated":"2016-12-15T10:41:34.862Z","comments":true,"path":"about.html","permalink":"https://baiyangliu.com/about.html","excerpt":"","text":"I’m a fatal bug!"},{"title":"","date":"2016-12-19T08:50:56.926Z","updated":"2016-12-19T08:50:56.926Z","comments":true,"path":"me.js","permalink":"https://baiyangliu.com/me.js","excerpt":"","text":"me={qq:407453324,wechat:\"baiyangliu\",email:\"lc@baiyangliu.com\"};"},{"title":"","date":"2016-12-19T09:46:23.193Z","updated":"2016-12-19T09:46:23.193Z","comments":true,"path":"test_speed.js","permalink":"https://baiyangliu.com/test_speed.js","excerpt":"","text":"var speedTestDone=false;var speedTest=function(e){if(speedTestDone){return}speedTestDone=true;var t=$(\"#\"+e);t.innerHTML+=\"【响应最快】\";console.log(e+\"【响应最快】\")};window.onload=function(){var e=$(\"head\");var t=$(\".links-of-blogroll-list li a\");t.each(function(){var t=$(this).attr(\"href\");$(this).parent().attr(\"id\",t);setTimeout(function(){if(speedTestDone){return}$(\"\").attr({src:t+\"/me.js\",type:\"text/javascript\",onload:\"speedTest('\"+t+\"')\"}).appendTo(e)},0)})};"},{"title":"标签","date":"2016-12-15T10:02:16.000Z","updated":"2016-12-15T10:33:51.584Z","comments":true,"path":"tags.html","permalink":"https://baiyangliu.com/tags.html","excerpt":"","text":""}],"posts":[{"title":"JSON压缩方案","slug":"JSON压缩方案","date":"2016-12-15T07:38:41.000Z","updated":"2016-12-15T11:51:20.944Z","comments":true,"path":"JSON压缩方案.html","link":"","permalink":"https://baiyangliu.com/JSON压缩方案.html","excerpt":"","text":"关于JSON，大家耳熟能详，不做多说，今天在这里分享一下关于JSON压缩的几点方案。1.压缩Key原始JSON（长度：79）1234567&#123; \"username\": \"张三\", \"gender\": \"M\", \"age\": 38, \"email\": \"a@b.com\", \"phone\": \"15818376578\"&#125;压缩Key以后（长度：57）1234567&#123; \"a\": \"张三\", \"b\": \"M\", \"c\": 38, \"d\": \"a@b.com\", \"e\": \"15818376578\"&#125;体积减小27.85%，对于高并发的服务而言，此数字相当可观！！！那么，是不是所有的Restful都可以采用这种方案来进行压缩呢？答案是否定的。首先，Key压缩损失了JSON的可读性，这就要求必须事先进行约定，增加了出错的风险；其次，对于JSON中含有较长Value字段的，压缩效果不是很明显，可能得不偿失。附：如果采用Jackson，那么对username的压缩实现为@JsonProperty(“a”)2.省略Key如果说方案1不解渴，那就来个更彻底的，直接省略掉Key！！！原始JSON（长度：79）1234567&#123; \"username\": \"张三\", \"gender\": \"M\", \"age\": 38, \"email\": \"a@b.com\", \"phone\": \"15818376578\"&#125;省略Key以后（长度：37）1234567[ \"张三\", \"M\", 38, \"a@b.com\", \"15818376578\"]体积减小53.16%，Oh,mygod!!!当然缺点就是将对象转换成了数组，这就要求字段顺序必须有保证（这个不难，排序一下就好），并且对于0或者null字段也不可省略。3.字典压缩改进版的方案1，即：预先分析所有的字段，然后对字段名称进行编码（缩写），得到编码字典，之后的JSON生成和解析依赖于该字典，这样就可以进行高效的“压缩”和“解压”。此过程无需改动（侵入）现有代码，实现时，仅需对输入和输出进行过滤。以上几种方案都是针对客户端为浏览器的情况下进行的改造，兼容性强，改动量都不是很大，却可以获得不错的性能提升。如果是服务与服务之间的通信，则完全可以替换掉JSON，比如Goole的Protobuf。","categories":[{"name":"高性能","slug":"高性能","permalink":"https://baiyangliu.com/categories/高性能/"}],"tags":[{"name":"JSON","slug":"JSON","permalink":"https://baiyangliu.com/tags/JSON/"}]},{"title":"CentOS7 Strongswan IKEV2 Let's Encrypt","slug":"CentOS7-Strongswan-IKEV2-Let-s-Encrypt","date":"2016-12-15T07:37:08.000Z","updated":"2016-12-15T11:55:08.559Z","comments":true,"path":"CentOS7-Strongswan-IKEV2-Let-s-Encrypt.html","link":"","permalink":"https://baiyangliu.com/CentOS7-Strongswan-IKEV2-Let-s-Encrypt.html","excerpt":"前面介绍了如入用自签名证书，请参见CentOS7 Strongswan IKEV2 架设梯子，这里介绍如何利用Let’s Encrypt签发证书省去导入的麻烦。","text":"前面介绍了如入用自签名证书，请参见CentOS7 Strongswan IKEV2 架设梯子，这里介绍如何利用Let’s Encrypt签发证书省去导入的麻烦。关于证书签发，请参见acme.sh，由于本站的域名已转移至Godaddy，利用acme.sh可以实现全自动证书签发。签发完后，证书位于/root/.acme.sh/0xa.in目录下（请查看本站证书详情）。接下来，执行以下命令123456cd /etc/strongswan/ipsec.d/certsln -s /root/.acme.sh/0xa.in/fullchain.cer fullchain.cercd /etc/strongswan/ipsec.d/privateln -s /root/.acme.sh/0xa.in/0xa.in.key 0xa.in.keycd /etc/strongswan/ipsec.d/cacertsln -s /root/.acme.sh/0xa.in/ca.cer ca.cer到这里，很多人会忘记配置根证书，从而出现错误“13801:IKE身份验证凭证不可接受”。解决办法是把DST ROOT CA X3给导入进来，以下是dst_root_ca_x3.cervim /etc/strongswan/ipsec.d/cacerts/dst_root_ca_x3.cer1234567891011121314151617181920-----BEGIN CERTIFICATE-----MIIDSjCCAjKgAwIBAgIQRK+wgNajJ7qJMDmGLvhAazANBgkqhkiG9w0BAQUFADA/MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMTDkRTVCBSb290IENBIFgzMB4XDTAwMDkzMDIxMTIxOVoXDTIxMDkzMDE0MDExNVowPzEkMCIGA1UEChMbRGlnaXRhbCBTaWduYXR1cmUgVHJ1c3QgQ28uMRcwFQYDVQQDEw5EU1QgUm9vdCBDQSBYMzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAN+v6ZdQCINXtMxiZfaQguzH0yxrMMpb7NnDfcdAwRgUi+DoM3ZJKuM/IUmTrE4Orz5Iy2Xu/NMhD2XSKtkyj4zl93ewEnu1lcCJo6m67XMuegwGMoOifooUMM0RoOEqOLl5CjH9UL2AZd+3UWODyOKIYepLYYHsUmu5ouJLGiifSKOeDNoJjj4XLh7dIN9bxiqKqy69cK3FCxolkHRyxXtqqzTWMIn/5WgTe1QLyNau7Fqckh49ZLOMxt+/yUFw7BZy1SbsOFU5Q9D8/RhcQPGX69Wam40dutolucbY38EVAjqr2m7xPi71XAicPNaDaeQQmxkqtilX4+U9m5/wAl0CAwEAAaNCMEAwDwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAQYwHQYDVR0OBBYEFMSnsaR7LHH62+FLkHX/xBVghYkQMA0GCSqGSIb3DQEBBQUAA4IBAQCjGiybFwBcqR7uKGY3Or+Dxz9LwwmglSBd49lZRNI+DT69ikugdB/OEIKcdBodfpga3csTS7MgROSR6cz8faXbauX+5v3gTt23ADq1cEmv8uXrAvHRAosZy5Q6XkjEGB5YGV8eAlrwDPGxrancWYaLbumR9YbK+rlmM6pZW87ipxZzR8srzJmwN0jP41ZL9c8PDHIyh8bwRLtTcm1D9SZImlJnt1ir/md2cXjbDaJWFBM5JDGFoqgCWjBH4d1QB7wCCZAA62RjYJsWvIjJEubSfZGL+T0yjWW06XyxV3bqxbYoOb8VZRzI9neWagqNdwvYkQsEjgfbKbYK7p2CNTUQ-----END CERTIFICATE-----修改 /etc/strongswan/ipsec.conf，leftcert=fullchain.cer修改 /etc/strongswan/ipsec.secrets，: RSA 0xa.in.key重启服务，strongswan restart。客户端连接的时候就不需要导入证书了。。。","categories":[{"name":"科学上网","slug":"科学上网","permalink":"https://baiyangliu.com/categories/科学上网/"}],"tags":[{"name":"Strongswan","slug":"Strongswan","permalink":"https://baiyangliu.com/tags/Strongswan/"}]},{"title":"Nginx HPKP Config","slug":"Nginx-HPKP-Config","date":"2016-12-15T07:36:28.000Z","updated":"2016-12-15T11:52:25.442Z","comments":true,"path":"Nginx-HPKP-Config.html","link":"","permalink":"https://baiyangliu.com/Nginx-HPKP-Config.html","excerpt":"以本站为例，采用的是Let’s Encrypt免费证书Let&#39;s Encrypt Authority X3，序列号为‎0a 01 41 42 00 00 01 53 85 73 6a 0b 85 ec a7 08，以下是ca.cer","text":"以本站为例，采用的是Let’s Encrypt免费证书Let&#39;s Encrypt Authority X3，序列号为‎0a 01 41 42 00 00 01 53 85 73 6a 0b 85 ec a7 08，以下是ca.cer123456789101112131415161718192021222324252627-----BEGIN CERTIFICATE-----MIIEkjCCA3qgAwIBAgIQCgFBQgAAAVOFc2oLheynCDANBgkqhkiG9w0BAQsFADA/MSQwIgYDVQQKExtEaWdpdGFsIFNpZ25hdHVyZSBUcnVzdCBDby4xFzAVBgNVBAMTDkRTVCBSb290IENBIFgzMB4XDTE2MDMxNzE2NDA0NloXDTIxMDMxNzE2NDA0NlowSjELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUxldCdzIEVuY3J5cHQxIzAhBgNVBAMTGkxldCdzIEVuY3J5cHQgQXV0aG9yaXR5IFgzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnNMM8FrlLke3cl03g7NoYzDq1zUmGSXhvb418XCSL7e4S0EFq6meNQhY7LEqxGiHC6PjdeTm86dicbp5gWAf15Gan/PQeGdxyGkOlZHP/uaZ6WA8SMx+yk13EiSdRxta67nsHjcAHJyse6cF6s5K671B5TaYucv9bTyWaN8jKkKQDIZ0Z8h/pZq4UmEUEz9l6YKHy9v6Dlb2honzhT+Xhq+w3Brvaw2VFn3EK6BlspkENnWAa6xK8xuQSXgvopZPKiAlKQTGdMDQMc2PMTiVFrqoM7hD8bEfwzB/onkxEz0tNvjj/PIzark5McWvxI0NHWQWM6r6hCm21AvA2H3DkwIDAQABo4IBfTCCAXkwEgYDVR0TAQH/BAgwBgEB/wIBADAOBgNVHQ8BAf8EBAMCAYYwfwYIKwYBBQUHAQEEczBxMDIGCCsGAQUFBzABhiZodHRwOi8vaXNyZy50cnVzdGlkLm9jc3AuaWRlbnRydXN0LmNvbTA7BggrBgEFBQcwAoYvaHR0cDovL2FwcHMuaWRlbnRydXN0LmNvbS9yb290cy9kc3Ryb290Y2F4My5wN2MwHwYDVR0jBBgwFoAUxKexpHsscfrb4UuQdf/EFWCFiRAwVAYDVR0gBE0wSzAIBgZngQwBAgEwPwYLKwYBBAGC3xMBAQEwMDAuBggrBgEFBQcCARYiaHR0cDovL2Nwcy5yb290LXgxLmxldHNlbmNyeXB0Lm9yZzA8BgNVHR8ENTAzMDGgL6AthitodHRwOi8vY3JsLmlkZW50cnVzdC5jb20vRFNUUk9PVENBWDNDUkwuY3JsMB0GA1UdDgQWBBSoSmpjBH3duubRObemRWXv86jsoTANBgkqhkiG9w0BAQsFAAOCAQEA3TPXEfNjWDjdGBX7CVW+dla5cEilaUcne8IkCJLxWh9KEik3JHRRHGJouM2VcGfl96S8TihRzZvoroed6ti6WqEBmtzw3Wodatg+VyOeph4EYpr/1wXKtx8/wApIvJSwtmVi4MFU5aMqrSDE6ea73Mj2tcMyo5jMd6jmeWUHK8so/joWUoHOUgwuX4Po1QYz+3dszkDqMp4fklxBwXRsW10KXzPMTZ+sOPAveyxindmjkW8lGy+QsRlGPfZ+G6Z6h7mjem0Y+iWlkYcV4PIWL1iwBi8saCbGS5jN2p8M+X+Q7UNKEkROb3N6KOqkqm57TH2H3eDJAkSnh6/DNFu0Qg==-----END CERTIFICATE-----生成SPKI指纹12openssl x509 -noout -in ca.cer -pubkey | openssl asn1parse -noout -inform pem -out public.key;openssl dgst -sha256 -binary public.key | openssl enc -base64得到结果YLh1dUR9y6Kja30RrAn7JKnbQG/uEtLMkBgFF2Fuihg=本来Pin是需要备份的，哥懒得折腾了，直接铆一下AddTrust External CA RootlCppFqbkrlJ3EcVFAkeip0+44VaoJUymbnOaEUk7tEU=配置NGinx1add_header Public-Key-Pins &apos;pin-sha256=&quot;YLh1dUR9y6Kja30RrAn7JKnbQG/uEtLMkBgFF2Fuihg=&quot;; pin-sha256=&quot;lCppFqbkrlJ3EcVFAkeip0+44VaoJUymbnOaEUk7tEU=&quot; max-age=2592000; includeSubDomains&apos;;重启，检测一下。report-urissllabs","categories":[{"name":"ssl","slug":"ssl","permalink":"https://baiyangliu.com/categories/ssl/"}],"tags":[{"name":"ssl","slug":"ssl","permalink":"https://baiyangliu.com/tags/ssl/"}]},{"title":"刘氏家族","slug":"刘氏家族","date":"2016-12-15T07:34:27.000Z","updated":"2016-12-15T11:30:26.611Z","comments":true,"path":"刘氏家族.html","link":"","permalink":"https://baiyangliu.com/刘氏家族.html","excerpt":"","text":"文刘金存先 汉朝宏正廷 学遵国法传 家宗义方兴德泽本延长 绒和道大光 敦行秉良善 积后自荣昌承宪须修治 饮崇亦裕世 隆培栽福基 进广安怀志纪钦喜成献 高明著述全 嘉猷常建恕 显达保辉联富有恒欲俊 端宣昭敏慎 履循贵用中 发祥永锡庆","categories":[],"tags":[]},{"title":"CentOS7 Strongswan IKEV2 架设梯子","slug":"CentOS7-Strongswan-IKEV2-架设梯子","date":"2016-12-15T07:34:00.000Z","updated":"2016-12-15T11:54:58.184Z","comments":true,"path":"CentOS7-Strongswan-IKEV2-架设梯子.html","link":"","permalink":"https://baiyangliu.com/CentOS7-Strongswan-IKEV2-架设梯子.html","excerpt":"","text":"参考：1.https://linsir.org/post/how_to_install_IPSec_IKEV2_base_on_strongswan_with_CentOS72.https://raymii.org/s/tutorials/IPSEC_vpn_with_CentOS_7.htmlstrongswan.sh1234567891011121314151617181920212223242526272829303132333435#!/bin/sh#strongswan.shyum install strongswan -yyum install haveged -ysystemctl enable havegedsystemctl start havegedcd /etc/strongswanstrongswan pki --gen --type rsa --size 4096 --outform der &gt; ipsec.d/private/ca.key.derchmod 600 ipsec.d/private/ca.key.derstrongswan pki --self --ca --lifetime 7300 --in ipsec.d/private/ca.key.der --type rsa --dn \"C=CN, O=VPN, CN=StrongSwan Root CA\" --outform der &gt; ipsec.d/cacerts/ca.crt.derstrongswan pki --print --in ipsec.d/cacerts/ca.crt.derstrongswan pki --gen --type rsa --size 4096 --outform der &gt; ipsec.d/private/vpn.key.deropenssl x509 -inform DER -in ipsec.d/cacerts/ca.crt.der -out ipsec.d/cacerts/ca.crt.pem -outform PEMchmod 600 ipsec.d/private/vpn.key.derstrongswan pki --pub --in ipsec.d/private/vpn.key.der --type rsa | strongswan pki --issue --lifetime 7300 --cacert ipsec.d/cacerts/ca.crt.der --cakey ipsec.d/private/ca.key.der --dn \"C=CN, O=VPN, CN=vpn.0xa.in\" --san vpn.0xa.in --san 163.44.166.55 --san @163.44.166.55 --flag serverAuth --flag ikeIntermediate --outform der &gt; ipsec.d/certs/vpn.crt.derstrongswan pki --print --in ipsec.d/certs/vpn.crt.deropenssl x509 -inform DER -in ipsec.d/certs/vpn.crt.der -noout -textstrongswan pki --gen --type rsa --size 4096 --outform der &gt; ipsec.d/private/baiyangliu.key.derchmod 600 ipsec.d/private/baiyangliu.key.derstrongswan pki --pub --in ipsec.d/private/baiyangliu.key.der --type rsa | strongswan pki --issue --lifetime 7300 --cacert ipsec.d/cacerts/ca.crt.der --cakey ipsec.d/private/ca.key.der --dn \"C=CN, O=VPN, CN=vpn.0xa.in\" --san \"lc@baiyangliu.com\" --outform der &gt; ipsec.d/certs/baiyangliu.crt.deropenssl rsa -inform DER -in ipsec.d/private/baiyangliu.key.der -out ipsec.d/private/baiyangliu.key.pem -outform PEMopenssl x509 -inform DER -in ipsec.d/certs/baiyangliu.crt.der -out ipsec.d/certs/baiyangliu.crt.pem -outform PEMopenssl pkcs12 -export -inkey ipsec.d/private/baiyangliu.key.pem -in ipsec.d/certs/baiyangliu.crt.pem -name \"Baiyangliu VPN Certificate\" -certfile ipsec.d/cacerts/ca.crt.pem -caname \"StrongSwan Root CA\" -out baiyangliu.vpn.p12/etc/strongswan/ipsec.conf123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#/etc/strongswan/ipsec.confconfig setup uniqueids=neverconn %default keyexchange=ike left=%any leftsubnet=0.0.0.0/0 right=%anyconn IKE-BASE ikelifetime=60m keylife=20m rekeymargin=3m keyingtries=1 leftcert=vpn.crt.der rightsourceip=10.0.18.0/24 conn ike2-eap also=IKE-BASE keyexchange=ikev2 ike=aes128-sha256-ecp256,aes256-sha384-ecp384,aes128-sha256-modp2048,aes128-sha1-modp2048,aes256-sha384-modp4096,aes256-sha256-modp4096,aes256-sha1-modp4096,aes128-sha256-modp1536,aes128-sha1-modp1536,aes256-sha384-modp2048,aes256-sha256-modp2048,aes256-sha1-modp2048,aes128-sha256-modp1024,aes128-sha1-modp1024,aes256-sha384-modp1536,aes256-sha256-modp1536,aes256-sha1-modp1536,aes256-sha384-modp1024,aes256-sha256-modp1024,aes256-sha1-modp1024! esp=aes128gcm16-ecp256,aes256gcm16-ecp384,aes128-sha256-ecp256,aes256-sha384-ecp384,aes128-sha256-modp2048,aes128-sha1-modp2048,aes256-sha384-modp4096,aes256-sha256-modp4096,aes256-sha1-modp4096,aes128-sha256-modp1536,aes128-sha1-modp1536,aes256-sha384-modp2048,aes256-sha256-modp2048,aes256-sha1-modp2048,aes128-sha256-modp1024,aes128-sha1-modp1024,aes256-sha384-modp1536,aes256-sha256-modp1536,aes256-sha1-modp1536,aes256-sha384-modp1024,aes256-sha256-modp1024,aes256-sha1-modp1024,aes128gcm16,aes256gcm16,aes128-sha256,aes128-sha1,aes256-sha384,aes256-sha256,aes256-sha1! leftsendcert=always leftid=vpn.0xa.in leftauth=pubkey leftfirewall=yes rightauth=eap-mschapv2 rightsendcert=never eap_identity=%any rekey=no dpdaction=clear fragmentation=yes auto=addconn IPSec-IKEv1-PSK also=IKE-BASE keyexchange=ikev1 fragmentation=yes leftauth=psk rightauth=psk rightauth2=xauth auto=addconn IPSec-xauth also=IKE-BASE leftauth=psk leftfirewall=yes right=%any rightauth=psk rightauth2=xauth auto=add/etc/strongswan/strongswan.conf1234567891011121314151617#/etc/strongswan/strongswan.confcharon &#123; load_modular = yes duplicheck.enable = no compress = yes plugins &#123; include strongswan.d/charon/*.conf &#125; dns1 = 8.8.8.8 dns2 = 8.8.4.4 nbns1 = 8.8.8.8 nbns2 = 8.8.4.4&#125;include strongswan.d/*.conf/etc/strongswan/ipsec.secrets12345678#/etc/strongswan/ipsec.secrets: RSA vpn.key.derusername1 : EAP \"password1\"username2 : EAP \"password2\"username3 : EAP \"password3\"hipster: XAUTH \"tbkiT571KxqpaKy/ap1H4kcWX0SZkogJ\"/etc/sysctl.conf123net.ipv4.ip_forward = 1net.ipv4.conf.all.accept_redirects = 0net.ipv4.conf.all.send_redirects = 0配置防火墙123456789firewall-cmd --zone=dmz --permanent --add-rich-rule='rule protocol value=\"esp\" accept' # ESP (the encrypted data packets)firewall-cmd --zone=dmz --permanent --add-rich-rule='rule protocol value=\"ah\" accept' # AH (authenticated headers)firewall-cmd --zone=dmz --permanent --add-port=500/udp #IKE (security associations)firewall-cmd --zone=dmz --permanent --add-port=4500/udp # IKE NAT Traversal (IPsec between natted devices)firewall-cmd --permanent --add-service=\"ipsec\"firewall-cmd --zone=dmz --permanent --add-masqueradefirewall-cmd --set-default-zone=dmzfirewall-cmd --reloadfirewall-cmd --list-all启动123sysctl -psystemctl enable strongswanstrongswan restart","categories":[{"name":"科学上网","slug":"科学上网","permalink":"https://baiyangliu.com/categories/科学上网/"}],"tags":[{"name":"Strongswan","slug":"Strongswan","permalink":"https://baiyangliu.com/tags/Strongswan/"}]},{"title":"Windows添加开机启动","slug":"Windows添加开机启动","date":"2016-12-15T07:33:00.000Z","updated":"2016-12-15T11:53:43.506Z","comments":true,"path":"Windows添加开机启动.html","link":"","permalink":"https://baiyangliu.com/Windows添加开机启动.html","excerpt":"","text":"1234567891011[HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Run][HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\RunOnce][HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\RunServices][HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\RunServicesOnce][HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\Userinit][HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Run][HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\RunOnce][HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\RunServices][HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\RunServicesOnce][HKEY_CURRENT_USER\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Windows]","categories":[{"name":"工具","slug":"工具","permalink":"https://baiyangliu.com/categories/工具/"}],"tags":[{"name":"Windows","slug":"Windows","permalink":"https://baiyangliu.com/tags/Windows/"}]},{"title":"Nginx反向代理，tomcat request.getScheme() 总是返回http","slug":"Nginx反向代理，tomcat-request-getScheme-总是返回http","date":"2016-12-15T07:32:00.000Z","updated":"2016-12-15T11:53:18.210Z","comments":true,"path":"Nginx反向代理，tomcat-request-getScheme-总是返回http.html","link":"","permalink":"https://baiyangliu.com/Nginx反向代理，tomcat-request-getScheme-总是返回http.html","excerpt":"错误如下：12345request.getScheme() //总是 http，而不是实际的http或https request.isSecure() //总是false（因为总是http） request.getRemoteAddr() //总是 nginx 请求的 IP，而不是用户的IP request.getRequestURL() //总是 nginx 请求的URL 而不是用户实际请求的 URL response.sendRedirect( 相对url ) //总是重定向到 http 上 （因为认为当前是 http 请求）","text":"错误如下：12345request.getScheme() //总是 http，而不是实际的http或https request.isSecure() //总是false（因为总是http） request.getRemoteAddr() //总是 nginx 请求的 IP，而不是用户的IP request.getRequestURL() //总是 nginx 请求的URL 而不是用户实际请求的 URL response.sendRedirect( 相对url ) //总是重定向到 http 上 （因为认为当前是 http 请求）解决办法：修改nginx配置：12345proxy_set_header Host $host;proxy_set_header X-Real-IP $remote_addr;proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;proxy_set_header X-Forwarded-Proto $scheme;proxy_pass http://backends;修改tomcat（conf/server.xml），在Engine节点添加1234&lt;Valve className=\"org.apache.catalina.valves.RemoteIpValve\" remoteIpHeader=\"X-Forwarded-For\" protocolHeader=\"X-Forwarded-Proto\" protocolHeaderHttpsValue=\"https\"/&gt;重启服务即可。","categories":[{"name":"编码","slug":"编码","permalink":"https://baiyangliu.com/categories/编码/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://baiyangliu.com/tags/Nginx/"},{"name":"Tomcat","slug":"Tomcat","permalink":"https://baiyangliu.com/tags/Tomcat/"}]},{"title":"让C# WebBrowser使用IE11","slug":"让C-WebBrowser使用IE11","date":"2016-12-15T07:31:25.000Z","updated":"2016-12-15T11:54:13.324Z","comments":true,"path":"让C-WebBrowser使用IE11.html","link":"","permalink":"https://baiyangliu.com/让C-WebBrowser使用IE11.html","excerpt":"","text":"1234567Windows Registry Editor Version 5.00[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Internet Explorer\\MAIN\\FeatureControl\\FEATURE_BROWSER_EMULATION]&quot;xxx.exe&quot;=dword:2af9[HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\Microsoft\\Internet Explorer\\MAIN\\FeatureControl\\FEATURE_BROWSER_EMULATION]&quot;xxx.exe&quot;=dword:2af9将上述文件中的xxx.exe替换成你的程序名字，保存为.reg文件，运行即可。详情求参考：https://msdn.microsoft.com/en-us/library/ee330730(v=vs.85).aspx#browser_emulation","categories":[],"tags":[{"name":"c#","slug":"c","permalink":"https://baiyangliu.com/tags/c/"}]},{"title":"博客搬家","slug":"hello","date":"2016-12-15T04:59:00.000Z","updated":"2016-12-15T07:27:21.370Z","comments":true,"path":"hello.html","link":"","permalink":"https://baiyangliu.com/hello.html","excerpt":"","text":"折腾过Wordpress，折腾过Discuzz，折腾过Ghost，折腾过国内的各个博客……折腾来折腾去，以前写的好些东西都被折腾没了。不想再折腾了，以后就Hexo了。","categories":[],"tags":[]}]}